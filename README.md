
# Unified Higher Level API for Existing FITS Parser

**Name** : Gopi Krishna Menon

**College** : Dronacharya College of Engineering, Gurgaon, Haryana

**Course** : Computer Science Engineering

**Degree Program** : B.TECH ( Bachelor of Technology )

**Email** : krishnagopi487@outlook.com

## Availability : 

**How much time do you plan to spend on your GSOC?**

 I intend to spend about **36 Hours** per week *( 6 Hours every day * 6 Days )*  during the **3 Month Period**.  On weekends if required, I can spend more than 6 hours.  Mostly i work during the evening hours from  **6:00pm to 11:00pm** but during **holidays** i can work early in the morning also from **3:30 am to 6:00 am** .

**What are your intended start and end dates?**

I can start working on the project after **10th-15th May 2020** as after **15th May** my exams will be over and my 3 month  summer vacation will start by that time, so I will be able to fully concentrate on the project. Also I will require about 1 week's time ( During Community Bonding period or after ) to get to the drawing board with my mentor and design the higher level API from scratch in order to build API of high quality with ample amount of flexibility in it.  I intend to finish the project work on or before **August 10 2020**.

**What other factors affect your availability ?**

During the month of **July** I would request  **2 days** leave as i would have to go for an exhibition along with my team in Bangalore for **MC Afee Scholars Programme**. Other than that I am completely free during the summers and don't have any other commitments as such.

## Background Information
I am a 3rd Year undergraduate in Computer Science and Engineering from Dronacharya College of Engineering, Gurgaon Haryana. *Some* of the courses that I have pursued during my first five semesters are :

 - Object Oriented Programming in C++
 - Principles of Operating System
 - Digital System Design
 - Digital Electronics
 - Theory of Computation
 - Core Java
 - Discrete Mathematics 
 - Computer Architecture and Organization
 - Data Structures and Algorithms in C++
 - Microprocessors and Interfacing
 - Computer Graphics

**Academic Performance**
 - **3rd Semester** :
	 - Total Marks Secured : **926/1150** 
	 - University Rank		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  : **16**
	 - College Rank		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: **2**

 - **4th Semester** :
	 - Total Marks Secured : **936/1150** 
	 - University Rank		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  : **12**
	 - College Rank		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: **1**

 - **5th Semester** :
	 - Total Marks Secured : **986/1150** 
	 - University Rank		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  : **2 ( Merit List not yet declared but based on Result Gazette)**
	 - College Rank		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: **2**

I also secured 100/100 Marks in Computer Science in Class 12 CBSE Board Exams. I completed my high school education from **St.Thomas Sr.Sec School** , Bahadurgarh, Haryana.

 During my first and second semester I had scored around 870 and 836 respectively and did not secure any Rank from the university or college.
	 
**Internship/Jobs/Courses Audited**

 - I organized and mentored **Advanced C++ Programming Course** in my college for 6 weeks during my first year with students from 2nd, 4th and 6th semester
 - I audited Introduction to C++ course from National Programme on Technology Enhanced Learning ( NPTEL ) and was in the 5% toppers category
 - Last summer I also audited a course in Ethical Hacking from Internshala

**Programming Interests**

I have a considerable amount of knowledge in C++ and am quite comfortable working in C++ as C++ has been the daily driver for all my needs ( From last 2 years I have been working more on System Programming Projects than in other fields ). Also along with C++ I have good proficiency in languages such as C#, Visual Basic,  RUST, Java.

**Reason for Contributing to Boost Libraries**

C++ is the best language that I have worked on till now and out of curiosity, I wanted to know how the libraries and new features were introduced in the C++ language. This is when I was introduced to boost libraries for C++. I learned that Boost wrote code that was exceptional in quality and performance and has become the gold class industry standard for libraries in the C++ language. Along with that I also got to know that most of the features in C++ came from the boost libraries that had been written several years ago (2001,2002,2003). From that onwards, I became a big fan of Boost and always wanted to contribute to boost and someday have my own libraries in the boost and C++ standard itself. Also, I saw the real power of Open Source from boost. I believe that making a project open source and freeware not only makes it free for the people but also improves the quality of the code drastically.  This the main reason why I want to contribute to "boost" libraries.

**Have you done any previous work in this area before or on similar projects?**

Yes, I have been  working on a similar project from quite sometime ( Conceptually different but technically similar ). The project's name is GML (Generalized Markup Language). It is basically a pseudo programming language with an open model that allows you to code new features in the language using C++ . It provides better readability and support for both structuring the data and for writing programs in it. It provides about 80%  performance boost from most XML parsers ( Rapid XML from boost is still 20% faster than us but lacks a lot of features ) with a ton of additional features  and has a 80% less file size footprint. A XML file of 100KB would roughly be around 20KB in size in GML. This project recently got selected with 36 other projects  in the MC Afee Scholars Programme from Foundation of Advancement in Education in Research ( FAER)  among a group of 400 participants. *Although conceptually the projects are not similar, a lot of technical details related to parsing and storage are similar.* 

**What are your plans beyond this Summer of Code time frame for your proposed work?.**

Even after the **GSOC** period, I will continue to contribute to the **boost. Astronomy** until the library gets fully  accepted into boost and becomes the gold standard FITS library for C++. 

**Please rate, from 0 to 5 (0 being no experience, 5 being expert), your knowledge of the following languages, technologies, or tools:**


-   C++ 98/03 (traditional C++) : 4
-   C++ 11/14 (modern C++)&nbsp;&nbsp;&nbsp;&nbsp; :  4
-   C++ Standard Library&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 4 
-   Boost C++ Libraries&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 3
-   Git&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 3

**What software development environments are you most familiar with (Visual Studio, Eclipse, KDevelop, etc.)?**

Visual Studio with  Microsoft Windows is the daily driver for all of my needs and this is the one that i am most familiar with. Also I am proficient and can work  in Vs Code or Sublime if I am on the linux platform.

**What software documentation tool are you most familiar with (Doxygen, DocBook, Quickbook, etc.)?**

I am familiar with Doxygen and have been using it for my GML Project with Morsa MCSS framework for automatic documentation generation of my project.

## Project Proposal
The external API for FITS module provides a powerful yet easy to use API for reading and writing the FITS data.

It consists of a collection of functions that facilitates the user in communicating with the internal classes of a FITS module. In other words, it binds each of the parser_classes and provides a wrapper over them through which we can communicate with the different parsers inside the fits module. 

![](https://lh3.googleusercontent.com/LOtJQQkb5PSA1VUiUi3fn3QkT6ul_uJ2Ni8XlldaxWPYHxEwsBCofk8rJOorXFcGoPUoRocrT5tOslZzgAGx2bhdC1Cm98Dnk7MrSeHYJSuagfG4w0cp_J2cBI8Vjss3Ykdvdsr-N_fhH9muVKtBeBcGQK4E07gb2HQ9qaOX2A-Kq-urnjqKHZDvfv3b6spSc-nYMull-qZVdzrKpxtBap4p2fxl46XotYJoI3ttOUpph_rFgL-0GsjcN2BcKVnZJgGgAqvmzM7BK9VDyxCbFeXAcGIZbsS94aZmbUOPr4PtHZbf4hJcrrAo3BUSW1lqAZIl-9K3V7Dm5IEGo7LN0FCi4OXeu5Qc-Tz-SxjM7MQTMDj2Tpz0dykJmR1g4MsWEJHTqidnRfSlrjr0qRS8KYhn7qco9Wr2DYiJcO3kKANAvC2rRWNhNoviwq_QgDWVrQKSJG-3VkZI-gSvU_cpLa4azFbG-eHV6ZGTW1dv52ndTCpwavb0xjoY5MH4Dbw1Tua8b_J-yX7I60oh0HBTZ6VlFovknHdqEBlNGIbxI4VejnnjsikrItYzpUByT0S9tE6Pk-3Jh5Ej-fxrQ8L2EvgSijcUEl2zcITUMKeIkU-CMYD1ilvkwg73akWF0OssqkOiv-XDrhttG0MNU5lfVJ3Nj3R5mq3qxW7XuxSdn3adPTZyuNslJW17sh-h=w700-no-tmp.jpg)

**How would the interface be Used ?**

To read a FITS file we just use the read function with filename and file mode as argument ( Kindly refer to [competency test](https://github.com/gopi487krishna/FITS_primary_header) solution for a basic implementation )
```cpp
fits.read(filename, filemode);
```
Basically we can support three types of file modes (This will require some changes in the codebase of parsers)  namely
1. Stream Mode  ( Medium Files )
2. Buffered Mode ( Small Files )
3. Memory Mapped Mode ( Large Files)

> The code given below is pseudocode but a similar working implementation for a small part of FITS module is given as the solution for the [competency test](https://github.com/gopi487krishna/FITS_primary_header) . Kindly refer to the competency test solution for the same. Actual implementation may vary by a little, Also enforcing this kind of interface requires a some changes in the main codebase.

In order to access the primary HDU the user will have to simply write

```cpp
auto primary_hdu= get<primary_hdu>(fits[0]); 
// In case the user dosent know the indexes of hdu's
auto primary_hdu= get<primary_hdu>(fits["primary_hdu"]);
```
After obtaining the instance the user can do anything such as
```cpp
auto bscale_val= get<double>(primary_hdu["BSCALE"]);
if(bscale_val.has_value()){
std::cout<<"BSCALE : " << *bscale_val; 
} 
```
OR
```cpp
auto primary_dataarr=get<something>(primary_hdu.data());
```
Making changes to a particular HDU is also pretty easy. Just make changes in the instance itself i.e

```cpp
auto& primary_hdu=get<primary_hdu>(fits[0]);
auto& ascii_table=get<ascii_table>(fits[1]);

primary_hdu.insert("BSCALE",2.0,"Set the Scaling Factor");
// Other Extentions can also be modified at the same time
ascii_table.insert("SOMETHING", SOMEVALUE,"Comment");
ascii_table.setData(new_data_array); // New data array is  basically serialized version of data to string.

// After all the changes have been made
fits.writeChangesTo(filename);// How this works is explained below
```
**Implementation details ( Only Summarized)**
**read()** : The read function takes a filename and file mode as argument and internally calls each of these classes ( ascii_table, binary_table, primary_hdu,image_extention ) to parse the fits file. Now introducing the file mode  creates a host of problems in itself but is not disposable either. ( The performance of memory_mapped file is way more than that of  

**Improvements with the Existing Code Base**








## Programming Competency
**Problem Statement** 

Develope a small class/function which will be able to read the primary header (Plus points for developing ways to enter the header-value in the primary header and writing into the file) 

**Solution**
Kindly visit  [Fits Reader](https://github.com/gopi487krishna/FITS_primary_header)
(github repo that hosts the solution for Programming Competency Test ) for instructions and implementation details on how to use the Fits Reader API (README).

Just to summarize the Fits Reader API can :

 - Read Primary Header or any other extension header  of a FITS File
 - Write updated primary header data back to the FITS file
 - Supports custom parsing policies that allows the programmer to specify his own set of parsing rules for FITS ( This is the very reason all different types of headers can be parsed and stored using this API).  



<!--stackedit_data:
eyJoaXN0b3J5IjpbLTgyNDI5NDYyLC0xOTQ2NDczODg0LC0yMz
g0MzgzNDAsLTEwMTY1OTIxNzYsNzcwNTQxNTM2LC0xMzQ2NDgy
MjE0LC0xODM5MDk0NTYxLC04ODc1MTMxOTQsMTk2NjI0NDA2MS
wtMjA2MTMwOTk4OCw3NDI1Nzc4MDIsNzAzMTEyOTMyLC0xODk5
NjQxMzY3LDY5MTU2ODk3NSwtNjAyODkyNTUzLDE3NjEwNzQyOD
YsODYyNjcwNzgwLC0yMjYwNjM0ODUsOTc4NTg1NTY0LC0xMDI1
OTA5MTQ1XX0=
-->